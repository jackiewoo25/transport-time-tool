<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é‹è¼¸æµç¨‹æ™‚é–“æ¨¡çµ„</title>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 10px;
      background-color: #f4f6f8;
    }
    h2 {
      text-align: center;
    }
    .section {
      border: 2px dashed #bbb;
      border-radius: 10px;
      margin: 10px 0;
      padding: 10px;
      min-height: 60px;
      background: #fff;
    }
    .label {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .card {
      display: inline-block;
      margin: 6px;
      padding: 10px 16px;
      border-radius: 12px;
      font-size: 16px;
      cursor: grab;
      user-select: none;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
    }
    .é‡è»Š { background-color: #fff4cc; border: 1px solid #ffbb00; }
    .æè²¨é» { background-color: #d9f8d9; border: 1px solid #5cb85c; }
    .å¸è²¨é» { background-color: #cce6ff; border: 1px solid #3399ff; }
    .è·¯ç¨‹, .ç­‰å¾…æ™‚é–“ { background-color: #fff0cc; border: 1px solid #e6b800; }
    .ä½œæ¥­æ™‚é–“ { background-color: #f8d9f8; border: 1px solid #d36cd3; }
    .æ™‚é–“å¡Š span {
      display: block;
      font-size: 12px;
      margin-top: 2px;
      color: #888;
    }
    .remove-btn {
      margin-left: 8px;
      color: red;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>ğŸš› é‹è¼¸æµç¨‹æ™‚é–“æ¨¡çµ„</h2>

  <div class="label">ğŸšš é‡è»Š / æè²¨é»</div>
  <div class="section" id="pickup">
    <div class="card é‡è»Š">é‡è»Š</div>
    <div class="card æè²¨é»">è—æµ·</div>
    <div class="card æè²¨é»">KY2</div>
    <div class="card æè²¨é»">KY3</div>
    <div class="card æè²¨é»">NK</div>
    <div class="card æè²¨é»">KK</div>
  </div>

  <div class="label">ğŸ“¦ å¸è²¨é»</div>
  <div class="section" id="dropoff">
    <div class="card å¸è²¨é»">é¹¿æ¸¯éŠ€æ³°</div>
    <div class="card å¸è²¨é»">çŸ½å“æ½­å­å¤§</div>
    <div class="card å¸è²¨é»">å‹é”åé‡Œå‚™ç”¨</div>
    <div class="card å¸è²¨é»">ç’°é´»æ–°æ¡¶</div>
    <div class="card å¸è²¨é»">ç’°é´»å—å´—</div>
    <div class="card å¸è²¨é»">ç¾å…‰åé‡Œ</div>
    <div class="card å¸è²¨é»">å±•é Œæ–—å…­</div>
    <div class="card å¸è²¨é»">å±•é€ç«¹å±±</div>
    <div class="card å¸è²¨é»">çŸ½å“æ½­å­å°</div>
    <div class="card å¸è²¨é»">æ™‰æ¤¿</div>
    <div class="card å¸è²¨é»">æ¾å’Œ50N</div>
    <div class="card å¸è²¨é»">ä¹…å…å·¥æ¥­</div>
    <div class="card å¸è²¨é»">æ˜åŸºææ–™</div>
    <div class="card å¸è²¨é»">è‰¾æ°æ—­ä¸€æœŸ</div>
    <div class="card å¸è²¨é»">è±ç”Ÿä¸­æ¸¯</div>
    <div class="card å¸è²¨é»">è±ç”Ÿ2å» </div>
    <div class="card å¸è²¨é»">è±ç”Ÿ5å» </div>
    <div class="card å¸è²¨é»">è±ç”Ÿ1å» </div>
    <div class="card å¸è²¨é»">çŸ½å“å’Œç¾ä¸€æœŸ</div>
    <div class="card å¸è²¨é»">çŸ½å“å’Œç¾äºŒæœŸ</div>
    <div class="card å¸è²¨é»">è¶…è±é ­ä»½</div>
    <div class="card å¸è²¨é»">çƒæ—¥å•¤é…’</div>
    <div class="card å¸è²¨é»">ä¸­æ²¹å°ä¸­80N</div>
    <div class="card å¸è²¨é»">å°ç£ç‰¹å“</div>
    <div class="card å¸è²¨é»">å°å¤§æ°£é«”</div>
    <div class="card å¸è²¨é»">å·¨è±ç²¾å¯†</div>
    <div class="card å¸è²¨é»">äºæ´²å…‰å­¸</div>
    <div class="card å¸è²¨é»">ç¾å…‰FBT</div>
    <div class="card å¸è²¨é»">éš†é”ç«¹å—å» </div>
    <div class="card å¸è²¨é»">æ—ºå®æ–°ç«¹735A</div>
  </div>

  <div class="label">ğŸ•’ è·¯ç¨‹ / ç­‰å¾…</div>
  <div class="section" id="route">
    <div class="card è·¯ç¨‹">30åˆ†é˜</div>
    <div class="card è·¯ç¨‹">60åˆ†é˜</div>
    <div class="card è·¯ç¨‹">90åˆ†é˜</div>
    <div class="card ç­‰å¾…æ™‚é–“">ç­‰å¾…15åˆ†</div>
    <div class="card ç­‰å¾…æ™‚é–“">ç­‰å¾…30åˆ†</div>
  </div>

  <div class="label">ğŸ›  ä½œæ¥­æ™‚é–“</div>
  <div class="section" id="work">
    <div class="card ä½œæ¥­æ™‚é–“">00:30</div>
    <div class="card ä½œæ¥­æ™‚é–“">00:45</div>
    <div class="card ä½œæ¥­æ™‚é–“">01:15</div>
    <div class="card ä½œæ¥­æ™‚é–“">01:45</div>
  </div>

  <div class="label">ğŸ”— é‹è¼¸æµç¨‹æ™‚é–“ç·š</div>
  <div class="section" id="timeline"></div>

  <script>
    const zones = ['pickup', 'dropoff', 'route', 'work', 'timeline'];
    zones.forEach(id => new Sortable(document.getElementById(id), {
      group: 'shared',
      animation: 150,
      onAdd: function (evt) {
        const el = evt.item;
        const target = evt.to.id;

        if (target === 'timeline') {
          const type = el.classList.contains('å¸è²¨é»') ? 'drop' : '';
          if (type === 'drop') maybeInsertReturn(el);
        }
      }
    }));

    function maybeInsertReturn(el) {
      const timeline = document.getElementById('timeline');
      const cards = [...timeline.children];
      const idx = cards.indexOf(el);
      const next = cards[idx + 1];

      if (!next || next.classList.contains('è·¯ç¨‹') || next.classList.contains('ç­‰å¾…æ™‚é–“')) {
        return;
      }

      // æ’å…¥ [å›ç¨‹è·¯ç¨‹] + [å›åˆ°è»Šå ´] å¡ç‰‡
      const backTrip = createCard('60åˆ†é˜', 'è·¯ç¨‹');
      const backToYard = createCard('å›è»Šå ´', 'é‡è»Š');

      timeline.insertBefore(backTrip, next);
      timeline.insertBefore(backToYard, next);
    }

    function createCard(text, cls) {
      const el = document.createElement('div');
      el.className = `card ${cls}`;
      el.textContent = text;
      return el;
    }
  </script>
</body>
</html>
