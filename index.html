<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é‹è¼¸æµç¨‹æ™‚é–“è¦–è¦ºæ¨¡çµ„</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: #f2f4f8;
      margin: 0;
      padding: 20px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .section {
      margin-bottom: 30px;
    }
    .section-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .btn {
      padding: 10px 15px;
      border-radius: 16px;
      font-size: 16px;
      border: none;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }
    .btn:hover {
      transform: scale(1.05);
    }
    .btn.pickup { background: rgba(173, 255, 168, 0.6); }
    .btn.dropoff { background: rgba(173, 216, 230, 0.6); }
    .btn.route { background: rgba(255, 255, 153, 0.7); }
    .btn.wait { background: rgba(255, 182, 193, 0.6); }
    .btn.operation { background: rgba(238, 130, 238, 0.6); }

    #timeline {
      margin-top: 30px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 16px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
      min-height: 80px;
    }
    .timeline-step {
      display: inline-block;
      margin: 5px;
      padding: 10px 12px;
      background: white;
      border-radius: 12px;
      font-size: 14px;
      border: 1px solid #ccc;
    }
    #alert {
      color: red;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>ğŸ§© é‹è¼¸æµç¨‹è¦–è¦ºæ¨¡çµ„</h2>
  
  <div class="section">
    <div class="section-title">ğŸš› é‡è»Š / æè²¨é»</div>
    <div class="button-group">
      <button class="btn pickup" onclick="addStep('è—æµ·')">è—æµ·</button>
      <button class="btn pickup" onclick="addStep('KY2')">KY2</button>
      <button class="btn pickup" onclick="addStep('KY3')">KY3</button>
      <button class="btn pickup" onclick="addStep('NK')">NK</button>
      <button class="btn pickup" onclick="addStep('KK')">KK</button>
    </div>
  </div>

  <div class="section">
    <div class="section-title">ğŸ“¦ å¸è²¨é»</div>
    <div class="button-group" id="dropoffs"></div>
  </div>

  <div class="section">
    <div class="section-title">ğŸ•’ è·¯ç¨‹</div>
    <div class="button-group">
      <button class="btn route" onclick="addStep('15åˆ†é˜')">15åˆ†é˜</button>
      <button class="btn route" onclick="addStep('30åˆ†é˜')">30åˆ†é˜</button>
      <button class="btn route" onclick="addStep('60åˆ†é˜')">60åˆ†é˜</button>
      <button class="btn route" onclick="addStep('90åˆ†é˜')">90åˆ†é˜</button>
    </div>
  </div>

  <div class="section">
    <div class="section-title">â³ ç­‰å¾…</div>
    <div class="button-group">
      <button class="btn wait" onclick="addStep('ç­‰å¾…15åˆ†é˜')">ç­‰å¾…15åˆ†é˜</button>
      <button class="btn wait" onclick="addStep('ç­‰å¾…30åˆ†é˜')">ç­‰å¾…30åˆ†é˜</button>
      <button class="btn wait" onclick="addStep('ç­‰å¾…60åˆ†é˜')">ç­‰å¾…60åˆ†é˜</button>
      <button class="btn wait" onclick="addStep('ç­‰å¾…90åˆ†é˜')">ç­‰å¾…90åˆ†é˜</button>
    </div>
  </div>

  <div class="section">
    <div class="section-title">ğŸ”§ ä½œæ¥­æ™‚é–“</div>
    <div class="button-group">
      <button class="btn operation" onclick="addStep('ä½œæ¥­00:30')">00:30</button>
      <button class="btn operation" onclick="addStep('ä½œæ¥­00:45')">00:45</button>
      <button class="btn operation" onclick="addStep('ä½œæ¥­01:45')">01:45</button>
    </div>
  </div>

  <div id="timeline">
    <strong>ğŸšš é‹è¼¸æµç¨‹æ™‚é–“ç·šï¼š</strong>
  </div>
  <div id="alert"></div>

  <script>
    const dropoffs = [
      'é¹¿æ¸¯éŠ€æ³°','çŸ½å“æ½­å­å¤§','å‹é”åé‡Œå‚™ç”¨','ç’°é´»æ–°æ¡¶','ç’°é´»å—å´—','ç¾å…‰åé‡Œ','å±•é Œæ–—å…­','å±•é€ç«¹å±±','çŸ½å“æ½­å­å°','æ™‰æ¤¿','æ¾å’Œ50N','ä¹…å…å·¥æ¥­','æ˜åŸºææ–™','è‰¾æ°æ—­ä¸€æœŸ','è±ç”Ÿä¸­æ¸¯','è±ç”Ÿ2å» ','è±ç”Ÿ5å» ','è±ç”Ÿ1å» ','çŸ½å“å’Œç¾ä¸€æœŸ','çŸ½å“å’Œç¾äºŒæœŸ','è¶…è±é ­ä»½','çƒæ—¥å•¤é…’','ä¸­æ²¹å°ä¸­80N','å°ç£ç‰¹å“','å°å¤§æ°£é«”','å·¨è±ç²¾å¯†','äºæ´²å…‰å­¸','ç¾å…‰FBT','éš†é”ç«¹å—å» ','æ—ºå®æ–°ç«¹735A'
    ];
    dropoffs.forEach(name => {
      const btn = document.createElement('button');
      btn.className = 'btn dropoff';
      btn.innerText = name;
      btn.onclick = () => addStep(name);
      document.getElementById('dropoffs').appendChild(btn);
    });

    const timeline = document.getElementById("timeline");
    const alertBox = document.getElementById("alert");
    let steps = [];

    function addStep(step) {
      alertBox.innerText = '';
      const last = steps[steps.length - 1] || '';
      const isDropoff = dropoffs.includes(step);
      const isRoute = /åˆ†é˜$/.test(step) && !step.startsWith("ç­‰å¾…");

      if (isDropoff && last && dropoffs.includes(last)) {
        alertBox.innerText = 'â— å¸è²¨é»å¾Œä¸èƒ½å†æ¥å¸è²¨é»ï¼Œè«‹åŠ å…¥è·¯ç¨‹æˆ–ä½œæ¥­';
        return;
      }

      // è‡ªå‹•è£œè»Šå ´
      if (isDropoff && !isRoute) {
        const next = steps[steps.length];
        if (!next || (!dropoffs.includes(next) && !next.includes('åˆ†é˜'))) {
          steps.push('è·¯ç¨‹ï¼š60åˆ†é˜');
          steps.push('å›è»Šå ´');
        }
      }

      steps.push(step);
      renderTimeline();
    }

    function renderTimeline() {
      timeline.innerHTML = '<strong>ğŸšš é‹è¼¸æµç¨‹æ™‚é–“ç·šï¼š</strong>';
      steps.forEach(s => {
        const el = document.createElement('span');
        el.className = 'timeline-step';
        el.innerText = s;
        timeline.appendChild(el);
      });
    }
  </script>
</body>
</html>
